<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Avery Fisk Coaching</title>

<!-- INTER FONT -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
    body { 
        margin: 0; 
        font-family: 'Inter', sans-serif; 
        background: #000; 
        color: #fff; 
        text-align: center; 
        padding: 40px 20px 70px 20px; 
    }

    /* ANIMATION BASE STATE */
    .fade-up {
        opacity: 0;
        transform: translateY(25px);
        transition: opacity 0.7s ease, transform 0.7s ease;
    }

    /* WHEN ELEMENT ENTERS VIEW */
    .fade-up.show {
        opacity: 1;
        transform: translateY(0);
    }

    .profile-img { 
        width: 150px; 
        height: 150px; 
        object-fit: cover; 
        border-radius: 100%; 
        border: 2px solid #444; 
        margin-bottom: 28px; 
    }

    h1 { 
        font-size: 26px; 
        margin-bottom: 12px; 
        letter-spacing: 1px; 
        font-weight: 700; 
    }

    .desc { 
        max-width: 420px; 
        margin: 0 auto 40px auto; 
        font-size: 15px; 
        line-height: 1.55; 
        color: #ccc; 
        font-weight: 400; 
    }

    .link-btn { 
        display: block; 
        background: #111; 
        color: #fff; 
        padding: 16px; 
        margin: 18px auto; 
        width: 85%; 
        max-width: 430px; 
        border-radius: 10px; 
        border: 1px solid #333; 
        text-decoration: none; 
        font-size: 17px; 
        font-weight: 600; 
        transition: 0.25s; 
    }

    .link-btn:hover { 
        background: #fff; 
        color: #000; 
        border-color: #fff; 
    }

    .cta2 { 
        margin: 55px auto 18px auto; 
        max-width: 420px; 
        font-size: 16px; 
        color: #e0e0e0; 
        line-height: 1.5; 
        font-weight: 600; 
    }

    .email-box { 
        margin-top: 45px; 
        max-width: 420px; 
        margin-left: auto; 
        margin-right: auto; 
        text-align: left; 
    }

    .email-box label { 
        font-size: 15px; 
        color: #aaa; 
        font-weight: 600; 
    }

    .email-input { 
        width: 100%; 
        padding: 14px; 
        margin-top: 10px; 
        margin-bottom: 18px; 
        border-radius: 8px; 
        border: none; 
        background: #222; 
        color: #fff; 
        font-size: 15px; 
    }

    .email-submit { 
        width: 100%; 
        padding: 14px; 
        border-radius: 8px; 
        background: #fff; 
        color: #000; 
        font-weight: 700; 
        border: none; 
        font-size: 16px; 
        cursor: pointer; 
        transition: .3s; 
    }

    .email-submit:hover { 
        background: #ccc; 
    }

    /* small inline status */
    #formMessage {
        margin-top: 10px;
        color: #ccc;
        font-weight: 600;
        display: none;
        text-align: center;
    }
</style>
</head>

<body>

<!-- Animation wrappers -->
<img src="https://images.squarespace-cdn.com/content/v1/6932408d796db753ddcba68d/b6344938-7df6-4ec8-91a9-3d2287a23e63/584389590_18114555436604251_6154592210605558267_n.jpg?format=500w" 
     class="profile-img fade-up"/>

<h1 class="fade-up">Avery Fisk Coaching</h1>

<div class="desc fade-up">
    High-performance fitness coaching engineered for people who expect more from themselves. 
    Build a physique that commands presence, develop discipline that elevates every part of your life, 
    and follow a system designed for real, measurable transformation delivered with speed and intention.
</div>

<a class="link-btn fade-up" href="AveryFisk-FreeWorkout.pdf" target="_blank">Download Free Workout Guide</a>
<a class="link-btn fade-up" href="https://book.stripe.com/14A9AT747feegp1cmK5sA02" target="_blank">Apply for 1:1 Coaching</a>
<a class="link-btn fade-up" href="https://calendly.com/averyfisk" target="_blank">Book a Consultation Call</a>
<a class="link-btn fade-up" href="https://instagram.com/averyfisk" target="_blank">Instagram</a>

<div class="cta2 fade-up">
    Not sure where to start? Get my personal recommendation based on your goals.
</div>

<a class="link-btn fade-up" href="https://docs.google.com/forms/d/e/1FAIpQLSe7lghPQfBve8SpCIYZTUmAY7NMFb42nxt3Yd8JvbkNkPcplA/viewform?usp=dialog" target="_blank">
    Get My Recommendation
</a>

<div class="email-box fade-up">
    <!-- PRESERVED HIDDEN FIELDS FOR COMPATIBILITY (keeps original intent) -->
    <form id="emailForm" name="emailForm" netlify netlify-honeypot="bot-field" data-netlify="true">
        <input type="hidden" name="form-name" value="emailForm">
        <input type="hidden" name="bot-field" id="bot-field">

        <label for="email">Join my email list for training strategies, physique tips, and exclusive coaching offers:</label>
        <input class="email-input" type="email" name="email" id="email" placeholder="Enter your email..." required>

        <button class="email-submit" type="submit">Join</button>

        <!-- inline status message (small, unobtrusive) -->
        <div id="formMessage"></div>
    </form>
</div>

<!-- SMOOTH SCROLL + OBSERVER SCRIPT -->
<script>
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
            }
        });
    }, { threshold: 0.2 });

    document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
</script>

<!-- Netlify + MailerLite integration script -->
<script>
/*
  Behavior:
  - Submits the Netlify form (so Netlify Forms records the submission)
  - Calls your Netlify serverless function '/.netlify/functions/subscription'
    which performs the secure MailerLite API call (server-side).
  - Shows a brief success or error message in the small inline status area.
  Requirements:
  - Deploy a Netlify function at /.netlify/functions/subscription that reads
    event.body.email and posts to MailerLite using MAILERLITE_API_KEY (env var).
*/

document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('emailForm');
    const emailInput = document.getElementById('email');
    const formMessage = document.getElementById('formMessage');
    const botField = document.getElementById('bot-field');

    function showMessage(text, color) {
        formMessage.style.display = 'block';
        formMessage.style.color = color || '#ccc';
        formMessage.textContent = text;
    }

    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // basic validation
        const email = emailInput.value && emailInput.value.trim();
        if (!email) {
            showMessage('Enter a valid email.', '#ff6b6b');
            return;
        }

        // prevent bot-field being filled
        if (botField && botField.value) {
            // silently ignore bots
            return;
        }

        // show immediate UI feedback
        showMessage('Submitting...', '#aaaaaa');

        try {
            // 1) Let Netlify record the form (fire-and-forget)
            // Build form data identical to a regular POST
            const formData = new FormData();
            formData.append('form-name', 'emailForm');
            formData.append('email', email);

            // Send to Netlify (so it's visible in Netlify Forms)
            fetch('/', {
                method: 'POST',
                body: formData
            }).catch(err => {
                // ignore Netlify errors client-side — main work is serverless function
                console.warn('Netlify form submit failed (client)', err);
            });

            // 2) Call the Netlify serverless function (server does MailerLite call)
            const resp = await fetch('/.netlify/functions/subscription', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email })
            });

            if (!resp.ok) {
                const text = await resp.text();
                console.error('Server subscription error', resp.status, text);
                showMessage('Subscription failed. Try again later.', '#ff6b6b');
                return;
            }

            // success
            showMessage('You’re in — check your inbox for your guide.', '#7CFC00');
            emailInput.value = '';

        } catch (err) {
            console.error(err);
            showMessage('Network error — try again.', '#ff6b6b');
        }
    });
});
</script>

</body>
</html>